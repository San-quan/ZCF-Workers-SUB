# Cloudflare-BackCN.yaml - æµ·å¤–å›å›½å…»å·ä¼˜åŒ– + IPv6 åŒä¿é™© + æ–­ç½‘ä¿æŠ¤ + å…œåº•å›å›½
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
unified-delay: true
ipv6: true

proxies:
  # æ›¿æ¢ä¸ºä½ çš„å®é™…èŠ‚ç‚¹ï¼ˆä»è®¢é˜…æ‹‰å–ï¼Œå¦‚Starlinkå›å›½ï¼‰
  - name: "ğŸ‡¨ğŸ‡³ å›å›½èŠ‚ç‚¹1"
    type: vmess
    server: backcn.example.com
    port: 443
    uuid: your-uuid
    alterId: 0
    cipher: auto
    tls: true
  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹1"
    type: vmess
    server: hk.example.com
    port: 443
    uuid: your-uuid
    alterId: 0
    cipher: auto
    tls: true
  - name: "ğŸŒ æµ·å¤–èŠ‚ç‚¹1"
    type: vmess
    server: us.example.com
    port: 443
    uuid: your-uuid
    alterId: 0
    cipher: auto
    tls: true

proxy-groups:
  - name: "å›å›½"
    type: select
    proxies:
      - "ğŸ‡¨ğŸ‡³ .*(å›å›½|ä¸­å›½|CN|å›½å†…|BackCN|StarlinkCN).*"
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©-å›å›½"
      - "ğŸ”¯ æ•…éšœè½¬ç§»-å›å›½"
  - name: "é¦™æ¸¯"
    type: select
    proxies:
      - "ğŸ‡­ğŸ‡° .*(é¦™æ¸¯|HK|HongKong).*"
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©-é¦™æ¸¯"
      - "ğŸ”¯ æ•…éšœè½¬ç§»-é¦™æ¸¯"
  - name: "æµ·å¤–"
    type: select
    proxies:
      - "ğŸŒ .*(ç¾å›½|US|æ¬§æ´²|EU|æ—¥æœ¬|JP|æ–°åŠ å¡|SG|éŸ©å›½|KR|å°æ¹¾|TW).*"
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©-æµ·å¤–"
      - "ğŸ”¯ æ•…éšœè½¬ç§»-æµ·å¤–"
  - name: "å…»å·"
    type: fallback
    proxies:
      - "å›å›½"
      - "é¦™æ¸¯"
    url: "http://www.gstatic.com/generate_204"
    interval: 300
  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©-å›å›½"
    type: url-test
    proxies:
      - "ğŸ‡¨ğŸ‡³ .*(å›å›½|ä¸­å›½|CN|å›½å†…|BackCN|StarlinkCN).*"
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 120
  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©-é¦™æ¸¯"
    type: url-test
    proxies:
      - "ğŸ‡­ğŸ‡° .*(é¦™æ¸¯|HK|HongKong).*"
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 120
  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©-æµ·å¤–"
    type: url-test
    proxies:
      - "ğŸŒ .*(ç¾å›½|US|æ¬§æ´²|EU|æ—¥æœ¬|JP|æ–°åŠ å¡|SG|éŸ©å›½|KR|å°æ¹¾|TW).*"
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 120
  - name: "ğŸ”¯ æ•…éšœè½¬ç§»-å›å›½"
    type: fallback
    proxies:
      - "ğŸ‡¨ğŸ‡³ .*(å›å›½|ä¸­å›½|CN|å›½å†…|BackCN|StarlinkCN).*"
    url: "http://www.gstatic.com/generate_204"
    interval: 300
  - name: "ğŸ”¯ æ•…éšœè½¬ç§»-é¦™æ¸¯"
    type: fallback
    proxies:
      - "ğŸ‡­ğŸ‡° .*(é¦™æ¸¯|HK|HongKong).*"
    url: "http://www.gstatic.com/generate_204"
    interval: 300
  - name: "ğŸ”¯ æ•…éšœè½¬ç§»-æµ·å¤–"
    type: fallback
    proxies:
      - "ğŸŒ .*(ç¾å›½|US|æ¬§æ´²|EU|æ—¥æœ¬|JP|æ–°åŠ å¡|SG|éŸ©å›½|KR|å°æ¹¾|TW).*"
    url: "http://www.gstatic.com/generate_204"
    interval: 300

rules:
  # 1. ç²¾ç»† IPï¼ˆIPv4+IPv6ï¼‰
  - IP-CIDR6,240e::/20,å…»å·,no-resolve
  - IP-CIDR6,2409:8000::/20,å…»å·,no-resolve
  - IP-CIDR6,2a13:1800::/29,å…»å·,no-resolve
  # 2. å…»å·åŸŸå
  - DOMAIN-SUFFIX,tiktokv.com,å…»å·
  - DOMAIN-SUFFIX,snssdk.com,å…»å·
  - DOMAIN-SUFFIX,kuaishou.com,å…»å·
  - DOMAIN-SUFFIX,xiaohongshu.com,å…»å·
  - DOMAIN-SUFFIX,2.taobao.com,å…»å·
  # 3. ä¸­å›½åŸºç¡€
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-SUFFIX,com.cn,DIRECT
  - DOMAIN-SUFFIX,baidu.com,å›å›½
  - DOMAIN-SUFFIX,taobao.com,å›å›½
  - DOMAIN-SUFFIX,qq.com,å›å›½
  - DOMAIN-SUFFIX,weixin.qq.com,å›å›½
  - GEOIP,CN,DIRECT
  - GEOIP,CN-V6,DIRECT
  - GEOIP,HK,é¦™æ¸¯
  # 4. æµ·å¤–å¤§ç«™
  - DOMAIN-SUFFIX,google.com,æµ·å¤–
  - DOMAIN-SUFFIX,youtube.com,æµ·å¤–
  - DOMAIN-SUFFIX,apple.com,æµ·å¤–
  - DOMAIN-SUFFIX,microsoft.com,æµ·å¤–
  - DOMAIN-SUFFIX,amazon.com,æµ·å¤–
  - DOMAIN-SUFFIX,facebook.com,æµ·å¤–
  - GEOIP,US,æµ·å¤–
  - GEOIP,JP,æµ·å¤–
  - GEOIP,!CN,å›å›½  # æµ·å¤–å›å›½
  # 5. å…œåº•
  - MATCH,å›å›½
