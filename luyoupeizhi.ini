; ACL4SSR_BackCN_HK_Starlink_AppPriority.ini - 2025 ç¼…ç”¸ Starlink æœ€ç»ˆå®Œå…¨ä½“
; ç‰ˆæœ¬: 2.0 (2025-10-24) - é›†æˆ IPv4/IPv6 ç²¾ç»†æ®µã€èŠ‚ç‚¹å…¨æ­»æ–­ç½‘ã€TUN ä¼˜åŒ–
; ç”¨é€”: Subconverter ç”Ÿæˆ Clash-Meta YAMLï¼ŒæŠ–éŸ³/å¿«æ‰‹/å°çº¢ä¹¦/é—²é±¼ä¼˜å…ˆå›å›½ï¼ŒèŠ‚ç‚¹ä¸å¯ç”¨å³æ–­ç½‘

[general]
loglevel = debug
append = false
skip-missed = true
tproxy = true
error-report = true
log-file = /tmp/subconverter.log

[rule_provider]
; ä¸­å›½åŸºç¡€
geoip-cn        = type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN.txt",       path: ./ruleset/geoip-cn.yaml,      interval: 86400
geoip-cn-v6     = type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN_v6.txt",    path: ./ruleset/geoip-cn-v6.yaml,   interval: 86400
geosite-cn      = type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geosite-cn.dat", path: ./ruleset/geosite-cn.yaml, interval: 86400

; ç”µå•†/æ”¯ä»˜/ç”Ÿæ´»
alibaba         = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alibaba.list", path: ./ruleset/alibaba.yaml,      interval: 86400
jd              = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/JD.list",      path: ./ruleset/jd.yaml,           interval: 86400
alipay          = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alipay.list",  path: ./ruleset/alipay.yaml,       interval: 86400
tencent         = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Tencent.list", path: ./ruleset/tencent.yaml,     interval: 86400
bilibili        = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bilibili.list",path: ./ruleset/bilibili.yaml,    interval: 86400
meituan         = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Meituan.list", path: ./ruleset/meituan.yaml,      interval: 86400
didi            = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/DiDi.list",    path: ./ruleset/didi.yaml,         interval: 86400
baidu           = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Baidu.list",   path: ./ruleset/baidu.yaml,        interval: 86400

; å…»å· App åŸŸå
douyin          = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Douyin.list",  path: ./ruleset/douyin.yaml,       interval: 86400
kuaishou        = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Kuaishou.list",path: ./ruleset/kuaishou.yaml,     interval: 86400
xiaohongshu     = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Xiaohongshu.list",path: ./ruleset/xiaohongshu.yaml,interval: 86400
xianyu          = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Xianyu.list",  path: ./ruleset/xianyu.yaml,       interval: 86400

; ç²¾ç»† IP æ®µï¼ˆIPv4+IPv6 åˆå¹¶æ–‡ä»¶ï¼Œç”± OpenWrt æ¯æ—¥ç”Ÿæˆï¼‰
douyin-kuaishou-ip-all = type: http, behavior: classical, url: "https://ä½ çš„-openwrt-å…¬ç½‘åœ°å€/ipcdn/douyin-kuaishou-ip-all.yaml", path: ./ruleset/douyin-kuaishou-ip-all.yaml, interval: 86400

; å±€åŸŸç½‘/å¹¿å‘Š/å¢™å¤–
lan             = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Lan.list",    path: ./ruleset/lan.yaml,          interval: 86400
banad           = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list",  path: ./ruleset/banad.yaml,        interval: 86400
adblock_reject  = type: http, behavior: domain,    url: "https://raw.githubusercontent.com/REIJI007/AdBlock_Rule_For_Clash/main/adblock_reject.yaml", path: ./ruleset/adblock_reject.yaml, interval: 3600
gfw             = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GreatFire.list",path: ./ruleset/gfw.yaml,        interval: 86400

[template]
clash-config = |
  mixed-port: 7890
  allow-lan: true
  mode: rule
  log-level: debug
  external-controller: 0.0.0.0:9090
  secret: ""
  ipv6: true
  bind-address: 0.0.0.0
  experimental:
    ignore-resolve-fail: true
    udp-relay-mode: quic
  tun:
    enable: true
    stack: system
    mtu: 1420
    device: utun
    dns-hijack:
      - 8.8.8.8:53
      - 1.1.1.1:53

proxy-providers = |
  china_subscription:
    type: http
    url: "${china_sub_url}"
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
  hongkong_subscription:
    type: http
    url: "${hk_sub_url}"
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300

proxies = |
  - name: ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹
    type: ss
    server: ${CN_SERVER}
    port: ${CN_PORT}
    cipher: ${CN_ENCRYPTION}
    password: ${CN_PASSWORD}
    udp: true
    ipv6: true
  - name: ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
    type: vmess
    server: ${HK_SERVER}
    port: ${HK_PORT}
    uuid: ${HK_UUID}
    alterId: 0
    cipher: auto
    tls: true
    network: ws
    ws-path: /ws
    ws-headers:
      Host: ${HK_HOST}
    udp: true
    ipv6: true

proxy-groups = |
  - name: ğŸ‡¨ğŸ‡³å›å›½ç»„
    type: url-test
    proxies:
      - china_subscription
      - ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 150

  - name: ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
    type: url-test
    proxies:
      - hongkong_subscription
      - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 150

  - name: App-ä¼˜å…ˆ
    type: fallback          # æ—  DIRECT â†’ èŠ‚ç‚¹å…¨æ­»å³æ–­ç½‘
    proxies:
      - ğŸ‡¨ğŸ‡³å›å›½ç»„
      - ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
    url: "http://www.gstatic.com/generate_204"
    interval: 300

  - name: è‡ªåŠ¨é€‰æ‹©
    type: select
    proxies:
      - App-ä¼˜å…ˆ
      - ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
      - ğŸ‡¨ğŸ‡³å›å›½ç»„

dns = |
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 114.114.114.114
    - 223.5.5.5
  fallback:
    - https://dns.cloudflare.com/dns-query
    - https://doh.360.cn/dns-query
    - https://dns.google/dns-query
  fallback-filter:
    geoip: false
    ipcidr:
      - 240.0.0.0/4
  default-nameserver:
    - 114.114.114.114
    - 8.8.8.8
  nameserver-policy:
    "geosite:cn": 114.114.114.114
    "+.tiktokv.com": 114.114.114.114
    "+.snssdk.com": 114.114.114.114
    "+.kuaishou.com": 114.114.114.114
    "+.xiaohongshu.com": 114.114.114.114
    "+.taobao.com": 114.114.114.114
    "+.alicdn.com": 114.114.114.114
    "+.google.com": https://dns.cloudflare.com/dns-query

backcn-rules = |
  ; â‘  ç²¾ç»† IP æ®µï¼ˆIPv4+IPv6ï¼‰æœ€ä¼˜å…ˆ
  - RULE-SET,douyin-kuaishou-ip-all,App-ä¼˜å…ˆ

  ; â‘¡ å±€åŸŸç½‘
  - RULE-SET,lan,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve

  ; â‘¢ ä¸­å›½ IP/åŸŸå
  - RULE-SET,geoip-cn,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,geoip-cn-v6,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,geosite-cn,ğŸ‡¨ğŸ‡³å›å›½ç»„

  ; â‘£ ç”µå•†/æ”¯ä»˜/ç”Ÿæ´»
  - RULE-SET,alibaba,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,jd,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,alipay,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,tencent,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,bilibili,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,meituan,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,didi,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,baidu,ğŸ‡¨ğŸ‡³å›å›½ç»„

  ; â‘¤ App åŸŸåå…œåº•
  - RULE-SET,douyin,App-ä¼˜å…ˆ
  - RULE-SET,kuaishou,App-ä¼˜å…ˆ
  - RULE-SET,xiaohongshu,App-ä¼˜å…ˆ
  - RULE-SET,xianyu,App-ä¼˜å…ˆ
  - DOMAIN-KEYWORD,idlefish,App-ä¼˜å…ˆ
  - DOMAIN-SUFFIX,2.taobao.com,App-ä¼˜å…ˆ

  ; â‘¥ å¸¸è§åŸŸå
  - DOMAIN-SUFFIX,baidu.com,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - DOMAIN-SUFFIX,qq.com,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - DOMAIN-SUFFIX,google.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
  - DOMAIN-SUFFIX,youtube.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„

  ; â‘¦ å¹¿å‘Š/è¿½è¸ª
  - RULE-SET,banad,REJECT
  - RULE-SET,adblock_reject,REJECT

  ; â‘§ å¢™å¤–
  - RULE-SET,gfw,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„

  ; â‘¨ å…œåº•
  - MATCH,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
