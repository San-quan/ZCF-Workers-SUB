; ACL4SSR_2025_MetaStashé€šç”¨ç‰ˆ_5.0.ini
; ç›®æ ‡ï¼šOpenClash(Metaâ‰¥1.16) + Stashâ‰¥2.6 é›¶æŠ¥é”™ | ä¿ç•™Hysteria2/TUIC/Hy1 | æŠ–éŸ³/å¿«æ‰‹/å°çº¢ä¹¦å…»å·ä¼˜å…ˆ
; ç”¨æ³•ï¼šsubconverter target=clash æˆ– target=stash å‡å¯ç›´æ¥é£Ÿç”¨

[common]
emoji = true
list = false
sort = false
include_remark = .*
exclude_remark = 
append_proxy_type = false
udp = true
tfo = false
scv = false
fdn = false
insert = false
new_name = true

# ============== æ¨¡æ¿åŒº ============== 
[template]
clash-config = |
  # OpenClash-Meta åŸç”Ÿå…¼å®¹
  mixed-port: 7890
  allow-lan: true
  mode: rule
  log-level: info
  external-controller: 0.0.0.0:9090
  ipv6: true
  # Meta ç‰¹æœ‰ï¼šHysteria2 / TUIC / Hy1 å¼€å¯
  tun:
    enable: false
    stack: system
    mtu: 1420
  # Stash å…¼å®¹å­—æ®µï¼ˆMeta å¿½ç•¥ï¼‰
  dns:
    enable: true
    ipv6: true
    enhanced-mode: fake-ip
    fake-ip-range: 198.18.0.1/16
    nameserver:
      - 223.5.5.5
      - 119.29.29.29
    fallback:
      - https://dns.cloudflare.com/dns-query
    fallback-filter:
      geoip: false
      ipcidr:
        - 240.0.0.0/4

# ============== ç­–ç•¥ç»„ ============== 
[group]
å›å›½ = select,(?i)ğŸ‡¨ğŸ‡³.*(å›å›½|ä¸­å›½|CN|å›½å†…|BackCN|StarlinkCN).*,â™»ï¸ è‡ªåŠ¨é€‰æ‹©-å›å›½,ğŸ”¯ æ•…éšœè½¬ç§»-å›å›½
é¦™æ¸¯ = select,(?i)ğŸ‡­ğŸ‡°.*(é¦™æ¸¯|HK|HongKong).*,â™»ï¸ è‡ªåŠ¨é€‰æ‹©-é¦™æ¸¯,ğŸ”¯ æ•…éšœè½¬ç§»-é¦™æ¸¯
æµ·å¤– = select,(?i)ğŸŒ.*(ç¾å›½|US|EU|æ—¥æœ¬|JP|æ–°åŠ å¡|SG|éŸ©å›½|KR|å°æ¹¾|TW).*,â™»ï¸ è‡ªåŠ¨é€‰æ‹©-æµ·å¤–,ğŸ”¯ æ•…éšœè½¬ç§»-æµ·å¤–
å…»å· = fallback,ğŸ‡¨ğŸ‡³å›å›½ç»„,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„          # æ— DIRECT â†’ èŠ‚ç‚¹å…¨æŒ‚å³æ–­ç½‘
è‡ªåŠ¨é€‰æ‹©-å›å›½ = url-test,(?i)ğŸ‡¨ğŸ‡³.*(å›å›½|ä¸­å›½|CN|å›½å†…|BackCN|StarlinkCN).*,url=http://www.gstatic.com/generate_204,interval=300,tolerance=120
è‡ªåŠ¨é€‰æ‹©-é¦™æ¸¯ = url-test,(?i)ğŸ‡­ğŸ‡°.*(é¦™æ¸¯|HK|HongKong).*,url=http://www.gstatic.com/generate_204,interval=300,tolerance=120
è‡ªåŠ¨é€‰æ‹©-æµ·å¤– = url-test,(?i)ğŸŒ.*(ç¾å›½|US|EU|æ—¥æœ¬|JP|æ–°åŠ å¡|SG|éŸ©å›½|KR|å°æ¹¾|TW).*,url=http://www.gstatic.com/generate_204,interval=300,tolerance=120

# ============== è§„åˆ™åŒº ============== 
[rule]
# 1. ç²¾ç»† IPï¼ˆIPv4+IPv6ï¼‰å…»å·æœ€ä¼˜å…ˆ
RULE-SET,douyin-kuaishou-ip-all,å…»å·
IP-CIDR6,240e::/20,å…»å·,no-resolve
IP-CIDR6,2409:8000::/20,å…»å·,no-resolve
IP-CIDR6,2a13:1800::/29,å…»å·,no-resolve

# 2. å…»å· App åŸŸå
RULE-SET,douyin,å…»å·
RULE-SET,kuaishou,å…»å·
RULE-SET,xiaohongshu,å…»å·
RULE-SET,xianyu,å…»å·
DOMAIN-SUFFIX,tiktokv.com,å…»å·
DOMAIN-SUFFIX,snssdk.com,å…»å·
DOMAIN-SUFFIX,kuaishou.com,å…»å·
DOMAIN-SUFFIX,xiaohongshu.com,å…»å·
DOMAIN-SUFFIX,2.taobao.com,å…»å·

# 3. ä¸­å›½å¤§é™†åŸºç¡€
DOMAIN-SUFFIX,cn,DIRECT
DOMAIN-SUFFIX,com.cn,DIRECT
DOMAIN-SUFFIX,baidu.com,å›å›½
DOMAIN-SUFFIX,taobao.com,å›å›½
DOMAIN-SUFFIX,qq.com,å›å›½
DOMAIN-SUFFIX,weixin.qq.com,å›å›½
GEOIP,CN,DIRECT
GEOIP,CN-V6,DIRECT
GEOIP,HK,é¦™æ¸¯

# 4. æµ·å¤–å¤§ç«™
DOMAIN-SUFFIX,google.com,æµ·å¤–
DOMAIN-SUFFIX,youtube.com,æµ·å¤–
DOMAIN-SUFFIX,apple.com,æµ·å¤–
DOMAIN-SUFFIX,microsoft.com,æµ·å¤–
DOMAIN-SUFFIX,amazon.com,æµ·å¤–
DOMAIN-SUFFIX,facebook.com,æµ·å¤–
GEOIP,US,æµ·å¤–
GEOIP,JP,æµ·å¤–

# 5. å…œåº•ï¼ˆä¸€é”®åˆ‡æ¢ï¼šæŠŠâ€œé¦™æ¸¯â€æ”¹æˆâ€œå›å›½â€å³å¯è®©éCNå…¨èµ°å›å›½ï¼‰
MATCH,é¦™æ¸¯

# ============== è§„åˆ™é›†ï¼ˆbehavior å·²æ”¹ Stash å…¼å®¹ï¼‰ ============== 
[rule_provider]
# å…»å· IP æ®µï¼ˆIPv4+IPv6 åˆå¹¶æ–‡ä»¶ï¼Œç”±ä½ æ¯æ—¥ç”Ÿæˆï¼‰
douyin-kuaishou-ip-all = type:http,behavior:ipcidr,url:"https://ä½ çš„åŸŸå/ipcdn/douyin-kuaishou-ip-all.yaml",path:./ruleset/douyin-kuaishou-ip-all.yaml,interval:86400
# å…»å·åŸŸåï¼ˆbehavior=domainï¼ŒStash åŸç”Ÿæ”¯æŒï¼‰
douyin = type:http,behavior:domain,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Douyin.list",path:./ruleset/douyin.yaml,interval:86400
kuaishou = type:http,behavior:domain,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Kuaishou.list",path:./ruleset/kuaishou.yaml,interval:86400
xiaohongshu = type:http,behavior:domain,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Xiaohongshu.list",path:./ruleset/xiaohongshu.yaml,interval:86400
xianyu = type:http,behavior:domain,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Xianyu.list",path:./ruleset/xianyu.yaml,interval:86400

# ä¸­å›½åŸºç¡€ï¼ˆdomain è¡Œä¸ºï¼ŒåŒå…¼å®¹ï¼‰
CN-domain = type:http,behavior:domain,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list",path:./ruleset/cn-domain.yaml,interval:86400
CN-ip = type:http,behavior:ipcidr,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIP.list",path:./ruleset/cn-ip.yaml,interval:86400

# æµ·å¤–ï¼ˆdomain+ipcidr åŒè¡Œä¸ºï¼‰
US-ip = type:http,behavior:ipcidr,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIP.list",path:./ruleset/us-ip.yaml,interval:86400
GFW-domain = type:http,behavior:domain,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list",path:./ruleset/gfw-domain.yaml,interval:86400

# ============== æ›´æ–°è„šæœ¬ ============== 
[update]
update_time = 05:00
auto_update = true
update_script = https://ä½ çš„åŸŸå/update-cn-domains.sh
