; Cloudflare-BackCN.ini - 2025 æµ·å¤–å›å›½Subconverteræ¨¡æ¿ (åŸºäºSan-quan/ZCF-Workers-SUB)
; ç”¨é€”: SUBAPI.cmliussss.netåç«¯ï¼Œç”ŸæˆClash YAML - å›½å†…ç›´è¿/å›å›½èŠ‚ç‚¹ï¼Œæµ·å¤–ä»£ç†
; ç‰ˆæœ¬: 1.1 (é€‚é…æµ·å¤–å›å›½)
; ä¼˜åŒ–: BackCNåˆ†æµ (å›½å†…GeoSite:cn DIRECTï¼Œå›å›½èŠ‚ç‚¹fallback)ï¼›url-testæµ‹é€Ÿï¼›base64åŠ å¯†URLï¼›AdBlock REJECT

[general]
loglevel = info
append = false
skip-missed = true
tproxy = true
error-report = true
log-file = /tmp/subconverter.log

[rule_provider]
; ä¸­å›½IP/åŸŸå (BackCNç›´è¿/å›å›½)
geoip-cn = type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN.txt", path: ./ruleset/geoip-cn.yaml, interval: 43200
geosite-cn = type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geosite-cn.dat", path: ./ruleset/geosite-cn.yaml, interval: 43200
; å›½å†…app (æ·˜å®/å¾®ä¿¡ç­‰ï¼Œç›´è¿æˆ–å›å›½ç»„)
alibaba = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alibaba.list", path: ./ruleset/alibaba.yaml, interval: 43200
tencent = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Tencent.list", path: ./ruleset/tencent.yaml, interval: 43200
baidu = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Baidu.list", path: ./ruleset/baidu.yaml, interval: 43200
; LANç›´è¿
lan = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Lan.list", path: ./ruleset/lan.yaml, interval: 43200
; å¹¿å‘Š/å¢™å¤– (REJECT/ä»£ç†)
banad = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list", path: ./ruleset/banad.yaml, interval: 43200
adblock_reject = type: http, behavior: domain, url: "https://raw.githubusercontent.com/REIJI007/AdBlock_Rule_For_Clash/main/adblock_reject.yaml", path: ./ruleset/adblock_reject.yaml, interval: 1200
gfw = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GreatFire.list", path: ./ruleset/gfw.yaml, interval: 43200

[template]
; YAMLå¤´éƒ¨
clash-config = |
  mixed-port: 7890
  allow-lan: true
  mode: rule
  log-level: debug
  external-controller: 0.0.0.0:9090
  secret: ""
  ipv6: true

; Proxy Providers (è®¢é˜…æ›´æ–° + æµ‹é€Ÿ)
proxy-providers = |
  backcn_subscription:
    type: http
    url: "${backcn_sub_url}"
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
  overseas_subscription:
    type: http
    url: "${overseas_sub_url}"
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300

; ç¤ºä¾‹Proxies (base64åŠ å¯†æ”¯æŒï¼›è®¢é˜…è¦†ç›–)
proxies = |
  - name: ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹
    type: ss
    server: ${CN_SERVER}
    port: ${CN_PORT}
    cipher: ${CN_ENCRYPTION}
    password: ${CN_PASSWORD}
    udp: true
    ipv6: true
  - name: ğŸŒæµ·å¤–èŠ‚ç‚¹
    type: trojan
    server: ${OVERSEAS_SERVER}
    port: ${OVERSEAS_PORT}
    password: ${OVERSEAS_PASSWORD}
    sni: ${OVERSEAS_SNI}
    udp: true
    ipv6: true

; Proxy Groups (url-testè‡ªåŠ¨æµ‹é€Ÿ)
proxy-groups = |
  - name: ğŸ‡¨ğŸ‡³å›å›½ç»„
    type: url-test
    proxies:
      - backcn_subscription
      - ğŸŒæµ·å¤–èŠ‚ç‚¹
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
  - name: ğŸŒæµ·å¤–ç»„
    type: url-test
    proxies:
      - overseas_subscription
      - ğŸ‡¨ğŸ‡³å›å›½ç»„
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50

; DNS (æµ·å¤–å›å›½åˆ†æµ)
dns = |
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 114.114.114.114  # å›½å†…DNS
  fallback:
    - https://dns.cloudflare.com/dns-query  # æµ·å¤–DoH
  nameserver-policy:
    "geosite:cn": 114.114.114.114  # å›½å†…åŸŸåå›½å†…DNS

; è·¯ç”±è§„åˆ™ (BackCN: å›½å†…DIRECT/å›å›½ï¼Œæµ·å¤–ä»£ç†ï¼ŒAdBlock REJECT)
backcn-rules = |
  - RULE-SET,lan,DIRECT
  - RULE-SET,geoip-cn,DIRECT  # å›½å†…IPç›´è¿
  - RULE-SET,geosite-cn,DIRECT  # å›½å†…åŸŸåç›´è¿
  - RULE-SET,alibaba,DIRECT
  - RULE-SET,tencent,DIRECT
  - RULE-SET,baidu,DIRECT
  - RULE-SET,gfw,ğŸŒæµ·å¤–ç»„  # å¢™å¤–ä»£ç†
  - RULE-SET,banad,REJECT
  - RULE-SET,adblock_reject,REJECT
  - MATCH,ğŸŒæµ·å¤–ç»„  # å…œåº•æµ·å¤–

; Rule Providers (åŠ¨æ€æ‹‰å–)
rule-providers = |
  lan: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Lan.list", path: ./ruleset/lan.yaml, interval: 43200
  geoip-cn: type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN.txt", path: ./ruleset/geoip-cn.yaml, interval: 43200
  geosite-cn: type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geosite-cn.dat", path: ./ruleset/geosite-cn.yaml, interval: 43200
  alibaba: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alibaba.list", path: ./ruleset/alibaba.yaml, interval: 43200
  tencent: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Tencent.list", path: ./ruleset/tencent.yaml, interval: 43200
  baidu: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Baidu.list", path: ./ruleset/baidu.yaml, interval: 43200
  banad: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list", path: ./ruleset/banad.yaml, interval: 43200
  adblock_reject: type: http, behavior: domain, url: "https://raw.githubusercontent.com/REIJI007/AdBlock_Rule_For_Clash/main/adblock_reject.yaml", path: ./ruleset/adblock_reject.yaml, interval: 1200
  gfw: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GreatFire.list", path: ./ruleset/gfw.yaml, interval: 43200
