; ChinaDomain-BackCN-Overseas.ini  çº¯è§„åˆ™ä¼˜åŒ–ç‰ˆ v1.4-opt (2025-10-15)
; ä½œè€…: è‰¾ç±³ (sanquan)
; ä¼˜åŒ–ï¼šåˆå¹¶è§„åˆ™ / ç²¾ç®€ DNS / é™è´Ÿè½½ / ä¸æ¤å…¥ä»»ä½•èŠ‚ç‚¹
; ç”¨æ³•ï¼šSubconverter è¾“å…¥æœ¬ INI + è®¢é˜…åœ°å€ â†’ ç”Ÿæˆ Clash.Meta YAML

[general]
loglevel          = info
append            = false
skip-missed       = true
tproxy            = true          # OpenWRT TProxy å…¼å®¹
error-report      = true
log-file          = /tmp/subconverter.log

; -------------------------------------------------------
; â‘  è§„åˆ™æºï¼ˆ12h ç»Ÿä¸€æ›´æ–°ï¼‰
; -------------------------------------------------------
[rule_provider]
# å›½å†… IP & åŸŸå
geoip-cn      = type:http,behavior:classical,url:"https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN.txt",path:./ruleset/geoip-cn.yaml,interval:43200
geoip-cn-v6   = type:http,behavior:classical,url:"https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN_v6.txt",path:./ruleset/geoip-cn-v6.yaml,interval:43200
geosite-cn    = type:http,behavior:classical,url:"https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geosite-cn.dat",path:./ruleset/geosite-cn.yaml,interval:43200

# å›½å†…åº”ç”¨ï¼ˆåˆå¹¶ tencent+baiduï¼‰
cn-ecosystem  = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Tencent.list",path:./ruleset/tencent-baidu.yaml,interval:43200
alibaba       = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alibaba.list",path:./ruleset/alibaba.yaml,interval:43200
jd            = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/JD.list",path:./ruleset/jd.yaml,interval:43200
alipay        = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alipay.list",path:./ruleset/alipay.yaml,interval:43200
bilibili      = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bilibili.list",path:./ruleset/bilibili.yaml,interval:43200
douyin        = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Douyin.list",path:./ruleset/douyin.yaml,interval:43200
kuaishou      = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Kuaishou.list",path:./ruleset/kuaishou.yaml,interval:43200
meituan       = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Meituan.list",path:./ruleset/meituan.yaml,interval:43200
didi          = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/DiDi.list",path:./ruleset/didi.yaml,interval:43200

# å¢™å¤–+å¹¿å‘Š
gfw-netflix   = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GreatFire.list",path:./ruleset/gfw-netflix.yaml,interval:43200
banad         = type:http,behavior:classical,url:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list",path:./ruleset/banad.yaml,interval:43200

; -------------------------------------------------------
; â‘¡ æ¨¡æ¿ç‰‡æ®µ
; -------------------------------------------------------
[template]
clash-config = |
  mixed-port: 7890
  allow-lan: true
  mode: rule
  log-level: info
  external-controller: 0.0.0.0:9090
  secret: ""
  ipv6: true
  tun:
    enable: true
    stack: system
    dns-hijack:
      - any:53
    auto-route: true
    auto-detect-interface: true

; â‘¢ è®¢é˜…æä¾›è€…ï¼ˆlazy=true é™ä½ CPUï¼‰
proxy-providers = |
  china_subscription:
    type: http
    url: "${china_sub_url}"
    interval: 43200
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 600
      lazy: true
  hongkong_subscription:
    type: http
    url: "${hk_sub_url}"
    interval: 43200
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 600
      lazy: true
  overseas_subscription:
    type: http
    url: "${overseas_sub_url}"
    interval: 43200
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 600
      lazy: true

; â‘£ DNS ç²¾ç®€ + é˜²æ³„æ¼
dns = |
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.msftncsi.com"
    - localhost.ptlogin2.qq.com
  default-nameserver:
    - 114.114.114.114
    - 8.8.8.8
  nameserver:
    - 114.114.114.114
    - 223.5.5.5
    - tls://dns.rubyfish.cn:853
  fallback:
    - https://dns.cloudflare.com/dns-query
    - https://doh.360.cn/dns-query
    - tls://1.1.1.1:853
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
  nameserver-policy:
    geosite:cn: 114.114.114.114
    '+.google.com': https://dns.cloudflare.com/dns-query
    '+.netflix.com': https://dns.cloudflare.com/dns-query

; -------------------------------------------------------
; â‘¤ ç­–ç•¥ç»„ï¼ˆurl-testï¼Œé˜ˆå€¼ 50 ms â†’ å¹³è¡¡é€Ÿåº¦ä¸è´Ÿè½½ï¼‰
; -------------------------------------------------------
proxy-groups = |
  - name: ğŸ‡¨ğŸ‡³å›å›½ç»„
    type: url-test
    proxies:
      - china_subscription
    url: "http://www.gstatic.com/generate_204"
    interval: 600
    tolerance: 50
  - name: ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
    type: url-test
    proxies:
      - hongkong_subscription
    url: "http://www.gstatic.com/generate_204"
    interval: 600
    tolerance: 50
  - name: ğŸ‡ºğŸ‡¸æµ·å¤–ç»„
    type: url-test
    proxies:
      - overseas_subscription
    url: "http://www.gstatic.com/generate_204"
    interval: 600
    tolerance: 50

; -------------------------------------------------------
; â‘¥ è·¯ç”±è§„åˆ™ï¼ˆåˆå¹¶ & é¡ºåºä¼˜åŒ–ï¼‰
; -------------------------------------------------------
backcn-rules = |
  # ç§æœ‰ç½‘ç›´è¿
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR6,fc00::/7,DIRECT,no-resolve

  # ä¸­å›½å¤§é™†
  - RULE-SET,geoip-cn,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,geoip-cn-v6,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,geosite-cn,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,alibaba,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,jd,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,alipay,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,cn-ecosystem,ğŸ‡¨ğŸ‡³å›å›½ç»„          # å¾®ä¿¡/QQ/ç™¾åº¦ åˆå¹¶
  - RULE-SET,bilibili,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,douyin,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,kuaishou,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,meituan,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,didi,ğŸ‡¨ğŸ‡³å›å›½ç»„

  # æµ·å¤– & æµåª’ä½“
  - RULE-SET,gfw-netflix,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
  - DOMAIN-SUFFIX,google.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
  - DOMAIN-SUFFIX,youtube.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
  - DOMAIN-SUFFIX,netflix.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
  - DOMAIN-SUFFIX,facebook.com,ğŸ‡ºğŸ‡¸æµ·å¤–ç»„

  # å¹¿å‘Š
  - RULE-SET,banad,REJECT

  # å…œåº•
  - MATCH,ğŸ‡ºğŸ‡¸æµ·å¤–ç»„
