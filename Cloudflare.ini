; Cloudflare-Private-merged.ini
; åˆå¹¶ç‰ˆï¼šåŸºäº San-quan/ZCF-Workers-SUB çš„ Cloudflare.iniï¼ŒåŠ å…¥ Subconverter / ç§æœ‰åŒ–è®¢é˜…æ¨¡æ¿æ”¯æŒ
; è¯´æ˜ï¼š
; - è¯¥æ–‡ä»¶åŒæ—¶ä¿ç•™å¯ç›´æ¥ç”¨äº Clash/Clash.Meta çš„ INI æ®µï¼ˆç¤ºä¾‹èŠ‚ç‚¹ã€ProxyGroupsã€Rules ç­‰ï¼‰
; - å¹¶åŠ å…¥ Subconverter ç§æœ‰åŒ– template æ®µï¼ˆç”¨äº Cloudflare Workers åç«¯ç”Ÿæˆ YAML/è®¢é˜…ï¼‰
; - è¯·æ›¿æ¢ç¤ºä¾‹èŠ‚ç‚¹ä¿¡æ¯ (server/port/password/uuid ç­‰)ï¼Œå¹¶æ ¹æ®éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡æˆ–è®¢é˜… URL

; -------------------------
; Clash åŸå§‹ INIï¼ˆç›´æ¥å¯ç”¨ï¼‰
; -------------------------
[General]
mixed-port = 7890
allow-lan = true
mode = rule
log-level = info
external-controller = 0.0.0.0:9090
secret =
ipv6 = true
unified-delay = true
tcp-concurrent = true
keep-alive-interval = 30

; -------------------------
; Proxies (ç¤ºä¾‹èŠ‚ç‚¹ â€” æ›¿æ¢ä¸ºçœŸå®èŠ‚ç‚¹)
; -------------------------
[Proxy:CN-1]
name = ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹1
type = ss
server = cn-server1.example.com
port = 443
cipher = chacha20-ietf-poly1305
password = your-cn-password
udp = true
ipv6 = true

[Proxy:CN-2]
name = ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹2
type = vmess
server = cn-server2.example.com
port = 443
uuid = your-cn-uuid
alterId = 0
cipher = auto
tls = true
udp = true
ipv6 = true

[Proxy:HK-1]
name = ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹1
type = trojan
server = hk-server1.example.com
port = 443
password = your-hk-password
sni = hk.example.com
udp = true
ipv6 = true

[Proxy:US-1]
name = ğŸ‡ºğŸ‡¸æµ·å¤–èŠ‚ç‚¹1
type = vmess
server = us-server1.example.com
port = 443
uuid = your-us-uuid
alterId = 0
cipher = auto
tls = true
udp = true
ipv6 = true

; -------------------------
; Proxy Groups
; -------------------------
[ProxyGroup:CN]
name = ğŸ‡¨ğŸ‡³å›å›½ç»„
type = url-test
proxies = ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹1,ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹2
url = http://www.gstatic.com/generate_204
interval = 300
tolerance = 50

[ProxyGroup:HK]
name = ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
type = url-test
proxies = ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹1
url = http://www.gstatic.com/generate_204
interval = 300
tolerance = 50

[ProxyGroup:US]
name = ğŸ‡ºğŸ‡¸æµ·å¤–ç»„
type = url-test
proxies = ğŸ‡ºğŸ‡¸æµ·å¤–èŠ‚ç‚¹1
url = http://www.gstatic.com/generate_204
interval = 300
tolerance = 50

[ProxyGroup:ReturnToCN]
name = æµ·å¤–å›å›½ä»£ç†
type = select
proxies = ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹1,ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹2,DIRECT

; -------------------------
; DNS é…ç½®
; -------------------------
[DNS]
enable = true
ipv6 = true
enhanced-mode = fake-ip
fake-ip-range = 198.18.0.1/16
nameserver = 114.114.114.114,8.8.8.8
fallback = https://dns.cloudflare.com/dns-query,https://doh.360.cn/dns-query
nameserver-policy.geosite:cn = 114.114.114.114
nameserver-policy.+.google.com = https://dns.cloudflare.com/dns-query

; -------------------------
; Rules (åŸå§‹é™æ€è§„åˆ™)
; -------------------------
[Rules]
1 = GEOIP,CN,ğŸ‡¨ğŸ‡³å›å›½ç»„
2 = DOMAIN-SUFFIX,cn,ğŸ‡¨ğŸ‡³å›å›½ç»„
3 = DOMAIN-SUFFIX,baidu.com,ğŸ‡¨ğŸ‡³å›å›½ç»„
4 = DOMAIN-SUFFIX,qq.com,ğŸ‡¨ğŸ‡³å›å›½ç»„
5 = DOMAIN-SUFFIX,google.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
6 = DOMAIN-SUFFIX,youtube.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
7 = DOMAIN-SUFFIX,netflix.com,ğŸ‡­ğŸ‡°é¦™æ¸¯ç»„
8 = DOMAIN-SUFFIX,facebook.com,ğŸ‡ºğŸ‡¸æµ·å¤–ç»„
9 = DOMAIN-SUFFIX,speedtest.net,ğŸ‡¨ğŸ‡³å›å›½ç»„
10 = DOMAIN-SUFFIX,speedtest.cn,ğŸ‡¨ğŸ‡³å›å›½ç»„
11 = DOMAIN-SUFFIX,ookla.com,ğŸ‡¨ğŸ‡³å›å›½ç»„
12 = DOMAIN-KEYWORD,speedtest,ğŸ‡¨ğŸ‡³å›å›½ç»„
13 = MATCH,ğŸ‡ºğŸ‡¸æµ·å¤–ç»„

; -------------------------
; Subconverter / ç§æœ‰åŒ–æ¨¡æ¿æ®µï¼ˆç”¨äº Cloudflare Workers / åç«¯ç”Ÿæˆè®¢é˜…ï¼‰
; è¯´æ˜ï¼šSubconverter é£æ ¼å­—æ®µï¼Œtemplate æ®µè¾“å‡ºæœ€ç»ˆ Clash YAML
; -------------------------
[general]
loglevel = info
append = false
skip-missed = true
tproxy = true
error-report = true
log-file = /tmp/subconverter.log

[rule_provider]
geoip-cn = type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN.txt", path: ./ruleset/geoip-cn.yaml, interval: 43200
geosite-cn = type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geosite-cn.dat", path: ./ruleset/geosite-cn.yaml, interval: 43200
alibaba = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alibaba.list", path: ./ruleset/alibaba.yaml, interval: 43200
tencent = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Tencent.list", path: ./ruleset/tencent.yaml, interval: 43200
baidu = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Baidu.list", path: ./ruleset/baidu.yaml, interval: 43200
lan = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Lan.list", path: ./ruleset/lan.yaml, interval: 43200
banad = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list", path: ./ruleset/banad.yaml, interval: 43200
adblock_reject = type: http, behavior: domain, url: "https://raw.githubusercontent.com/REIJI007/AdBlock_Rule_For_Clash/main/adblock_reject.yaml", path: ./ruleset/adblock_reject.yaml, interval: 1200
gfw = type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GreatFire.list", path: ./ruleset/gfw.yaml, interval: 43200
speedtest-china = type: http, behavior: domain, url: "https://kelee.one/Tool/Clash/Rule/SpeedtestChina.yaml", path: ./ruleset/speedtest-china.yaml, interval: 43200

[template]
; Clash YAML å¤´éƒ¨ï¼ˆç”¨äº Subconverter è¾“å‡ºï¼‰
clash-config = |
  mixed-port: 7890
  allow-lan: true
  mode: rule
  log-level: info
  external-controller: 0.0.0.0:9090
  secret: ""
  ipv6: true

; Proxy Providersï¼ˆè®¢é˜… URL å¯ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–ä¼ å‚å¡«å……ï¼‰
proxy-providers = |
  china_subscription:
    type: http
    url: "${china_sub_url}"
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
  overseas_subscription:
    type: http
    url: "${overseas_sub_url}"
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300

; é™æ€æˆ–å ä½ proxiesï¼Œè®¢é˜…ä¼šè¦†ç›–è¿™äº›æˆ–å¹¶åˆ—æ˜¾ç¤ºï¼ˆæ”¯æŒç¯å¢ƒå˜é‡å ä½ï¼‰
proxies = |
  - name: ğŸ‡¨ğŸ‡³å›å›½èŠ‚ç‚¹
    type: ss
    server: ${CN_SERVER}
    port: ${CN_PORT}
    cipher: ${CN_ENCRYPTION}
    password: ${CN_PASSWORD}
    udp: true
    ipv6: true
  - name: ğŸ‡ºğŸ‡¸æµ·å¤–èŠ‚ç‚¹
    type: trojan
    server: ${US_SERVER}
    port: ${US_PORT}
    password: ${US_PASSWORD}
    sni: ${US_SNI}
    udp: true
    ipv6: true

; Proxy Groupsï¼ˆurl-test è‡ªåŠ¨æµ‹é€Ÿï¼‰
proxy-groups = |
  - name: ğŸ‡¨ğŸ‡³å›å›½ç»„
    type: url-test
    proxies:
      - china_subscription
      - ğŸ‡ºğŸ‡¸æµ·å¤–èŠ‚ç‚¹
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
  - name: ğŸ‡ºğŸ‡¸æµ·å¤–ç»„
    type: url-test
    proxies:
      - overseas_subscription
      - ğŸ‡¨ğŸ‡³å›å›½ç»„
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50

; DNSï¼ˆé˜²æ³„æ¼ + åˆ†æµï¼‰
dns = |
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 114.114.114.114
  fallback:
    - https://dns.cloudflare.com/dns-query
  nameserver-policy:
    "geosite:cn": 114.114.114.114

; è·¯ç”±è§„åˆ™ï¼ˆä½¿ç”¨ RULE-SET è°ƒç”¨ rule-providersï¼‰
backcn-rules = |
  - RULE-SET,lan,DIRECT
  - RULE-SET,geoip-cn,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,geosite-cn,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,alibaba,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,tencent,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,baidu,ğŸ‡¨ğŸ‡³å›å›½ç»„
  - RULE-SET,gfw,ğŸ‡ºğŸ‡¸æµ·å¤–ç»„
  - RULE-SET,banad,REJECT
  - RULE-SET,adblock_reject,REJECT
  - MATCH,ğŸ‡ºğŸ‡¸æµ·å¤–ç»„

; Subconverter é£æ ¼çš„ rule-providers å—ï¼ˆYAML æ–‡æœ¬å½¢å¼ï¼‰
rule-providers = |
  lan: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Lan.list", path: ./ruleset/lan.yaml, interval: 43200
  geoip-cn: type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/CN.txt", path: ./ruleset/geoip-cn.yaml, interval: 43200
  geosite-cn: type: http, behavior: classical, url: "https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geosite-cn.dat", path: ./ruleset/geosite-cn.yaml, interval: 43200
  alibaba: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Alibaba.list", path: ./ruleset/alibaba.yaml, interval: 43200
  tencent: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Tencent.list", path: ./ruleset/tencent.yaml, interval: 43200
  baidu: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Baidu.list", path: ./ruleset/baidu.yaml, interval: 43200
  banad: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list", path: ./ruleset/banad.yaml, interval: 43200
  adblock_reject: type: http, behavior: domain, url: "https://raw.githubusercontent.com/REIJI007/AdBlock_Rule_For_Clash/main/adblock_reject.yaml", path: ./ruleset/adblock_reject.yaml, interval: 1200
  gfw: type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GreatFire.list", path: ./ruleset/gfw.yaml, interval: 43200
  speedtest-china: type: http, behavior: domain, url: "https://kelee.one/Tool/Clash/Rule/SpeedtestChina.yaml", path: ./ruleset/speedtest-china.yaml, interval: 43200
